<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö</title>
    <script src="videos-data.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: rgba(0, 255, 0, 0.2); border: 1px solid green; }
        .error { background: rgba(255, 0, 0, 0.2); border: 1px solid red; }
        .info { background: rgba(0, 150, 255, 0.2); border: 1px solid blue; }
        button { background: #ff0000; color: white; border: none; padding: 10px 20px; margin: 5px; border-radius: 5px; cursor: pointer; }
        video { max-width: 300px; margin: 10px; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –Ω–æ–≤–æ–π —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö</h1>
    
    <div id="results"></div>
    
    <h2>üé¨ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ –∏–∑ GitHub</h2>
    <div id="video-tests"></div>
    
    <h2>üì® –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö</h2>
    <button onclick="testDataSending()">–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è video1</button>
    
    <script>
        const results = document.getElementById('results');
        const videoTests = document.getElementById('video-tests');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ videoData –∑–∞–≥—Ä—É–∂–µ–Ω
        if (typeof videoData !== 'undefined' && Array.isArray(videoData)) {
            addResult('‚úÖ videoData –∑–∞–≥—Ä—É–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
            addResult(`üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ: ${videoData.length}`, 'info');
        } else {
            addResult('‚ùå videoData –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
        }
        
        // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ displayName
        videoData.forEach((video, index) => {
            if (video.displayName) {
                addResult(`‚úÖ video${index + 1}: displayName = "${video.displayName}"`, 'success');
            } else {
                addResult(`‚ùå video${index + 1}: displayName –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç`, 'error');
            }
        });
        
                 // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º GitHub URLs
         videoData.forEach((video, index) => {
             if (video.video_url.includes('raw.githubusercontent.com/PvPGOST/wablon-github-pages/main')) {
                 addResult(`‚úÖ video${index + 1}: GitHub URL –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (–≤–µ—Ç–∫–∞ main)`, 'success');
             } else {
                 addResult(`‚ùå video${index + 1}: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL: ${video.video_url}`, 'error');
             }
         });
        
        // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É –≤–∏–¥–µ–æ
        function testVideoLoading() {
            videoData.forEach((video, index) => {
                const videoElement = document.createElement('video');
                videoElement.style.display = 'block';
                videoElement.controls = true;
                videoElement.muted = true;
                videoElement.preload = 'metadata';
                
                const title = document.createElement('h3');
                title.textContent = `${video.title} (${video.displayName})`;
                
                const status = document.createElement('div');
                status.textContent = '–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...';
                
                videoElement.addEventListener('loadedmetadata', () => {
                    status.textContent = '‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ';
                    status.className = 'test-result success';
                    videoElement.currentTime = video.preview_time || 0;
                });
                
                videoElement.addEventListener('error', (e) => {
                    status.textContent = `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${e.target.error?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`;
                    status.className = 'test-result error';
                });
                
                const videoContainer = document.createElement('div');
                videoContainer.style.border = '1px solid #333';
                videoContainer.style.padding = '10px';
                videoContainer.style.margin = '10px';
                videoContainer.style.borderRadius = '5px';
                
                videoContainer.appendChild(title);
                videoContainer.appendChild(status);
                videoContainer.appendChild(videoElement);
                
                videoTests.appendChild(videoContainer);
                
                videoElement.src = video.video_url;
            });
        }
        
        // –¢–µ—Å—Ç 5: –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        function testDataSending() {
            const video = videoData[0]; // –ë–µ—Ä–µ–º –ø–µ—Ä–≤–æ–µ –≤–∏–¥–µ–æ
            const numericId = video.id.replace(/[^\d]/g, '');
            const videoPath = `video_templates/template_${numericId}.mp4`;
            
            const dataToSend = {
                'videoPath': videoPath,
                'displayName': video.displayName || video.title
            };
            
            addResult('üì® –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö:', 'info');
            addResult(`üìÅ videoPath: ${dataToSend.videoPath}`, 'info');
            addResult(`üìù displayName: ${dataToSend.displayName}`, 'info');
            addResult(`üìã JSON: ${JSON.stringify(dataToSend, null, 2)}`, 'info');
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ
        testVideoLoading();
    </script>
</body>
</html> 