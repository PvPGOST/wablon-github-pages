// Fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–±—Ä–∞–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
// –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

// –î–∞–Ω–Ω—ã–µ –æ –≤–∏–¥–µ–æ —à–∞–±–ª–æ–Ω–∞—Ö
const videoData = [
  {
    "id": "video1",
    "video_url": "videos/video_templates/template_1.mp4",
    "preview_image": "videos/previews/template_1_preview.jpg", // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é
    "title": "–ù–æ–º–µ—Ä 331",
    "displayName": "–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω ‚Ññ1", // –ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "duration": 10, // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "categories": ["new", "short", "solo_female"], // –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö

    "likes": 1010 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
  },
  {
    "id": "video2",
    "video_url": "videos/video_templates/Template 2.mp4",
    "preview_image": "videos/previews/template_2_preview.jpg", // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é
    "title": "–ù–æ–º–µ—Ä 332",
    "displayName": "–°—Ç—Ä–∞—Å—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω ‚Ññ2", // –ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "duration": 18, // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "categories": ["new", "short", "couple"], // –¢–æ–ª—å–∫–æ –Ω–æ–≤–æ–µ, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

    "likes": 8744 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
  },
  {
    "id": "video3",
    "video_url": "videos/video_templates/template_3.mp4",
    "preview_image": "videos/previews/template_3_preview.jpg", // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é
    "title": "–ù–æ–º–µ—Ä 333",
    "displayName": "–ü—Ä–µ–º–∏—É–º —à–∞–±–ª–æ–Ω ‚Ññ3", // –ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "duration": 185, // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "categories": ["long", "oral", "solo_female", "fetish"], // –¢–æ–ª—å–∫–æ –¥–ª–∏–Ω–Ω–æ–µ, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

    "likes": 15624 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
  },
  {
    "id": "video4",
    "video_url": "videos/video_templates/template_4.mp4",
    "preview_image": "videos/previews/template_4_preview.jpg", // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é
    "title": "–ù–æ–º–µ—Ä 334",
    "displayName": "–ò–Ω—Ç–∏–º–Ω—ã–π —à–∞–±–ª–æ–Ω ‚Ññ4", // –ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    "duration": 25, // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    "categories": ["short", "couple"], // –¢–æ–ª—å–∫–æ –∫–æ—Ä–æ—Ç–∫–æ–µ, –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

    "likes": 731 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
  }
];

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
const categories = {
  new: {
    name: "–ù–æ–≤–æ–µ",
    icon: "‚ú®"
  },
  popular: {
    name: "–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ",
    icon: "üî•"
  },
  all: {
    name: "–í—Å–µ",
    icon: "üì±"
  },
  couple: {
    name: "–ú+–ñ",
    icon: "üë´"
  },
  solo_female: {
    name: "–û–¥–Ω–∞",
    icon: "üë©"
  },
  threesome: {
    name: "–ú–ñ–ú",
    icon: "üéä"
  },
  oral: {
    name: "–ú–∏–Ω–µ—Ç",
    icon: "üé∫"
  },
  fetish: {
    name: "–§–µ—Ç–∏—à–∏",
    icon: "üå∂"
  },
  long: {
    name: "–î–ª–∏–Ω–Ω—ã–µ",
    icon: "üìè"
  },
  short: {
    name: "–ö–æ—Ä–æ—Ç–∫–∏–µ",
    icon: "‚ö°"
  },
  favorites: {
    name: "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ",
    icon: "‚≠ê"
  }
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∏–¥–µ–æ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
function getVideosByCategory(category) {
  if (category === 'all') {
    return videoData;
  }
  if (category === 'favorites') {
    // –ü–æ–ª—É—á–∞–µ–º –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –∏–∑ Cloud Storage
    return getFavoriteVideos();
  }
  if (category === 'popular') {
    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–∏–¥–µ–æ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤
    return getPopularVideos();
  }
  return videoData.filter(video => video.categories.includes(category));
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–∏–¥–µ–æ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
function getPopularVideos() {
  // –°—á–∏—Ç–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –≤–∏–¥–µ–æ —Å –ª–∞–π–∫–∞–º–∏ –±–æ–ª—å—à–µ 0
  const popularThreshold = 1;
  
  return videoData
    .filter(video => video.likes >= popularThreshold)
    .sort((a, b) => b.likes - a.likes); // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –ª–∞–π–∫–æ–≤ (—Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–µ—Ä–≤—ã–º–∏)
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1 —Å–µ–∫—É–Ω–¥–∞ = 50 —Ç–æ–∫–µ–Ω–æ–≤)
function calculateTokens(durationInSeconds) {
  return durationInSeconds * 50;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ —Ç–æ–∫–µ–Ω–∞–º–∏
function getDurationText(videoId) {
  const video = videoData.find(v => v.id === videoId);
  if (!video || !video.duration) {
    return '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞';
  }
  
  const tokens = calculateTokens(video.duration);
  return `${video.duration} —Å–µ–∫—É–Ω–¥ = ${tokens} —Ç–æ–∫–µ–Ω–æ–≤`;
}

// === –°–ò–°–¢–ï–ú–ê –ò–ó–ë–†–ê–ù–ù–û–ì–û ===

// –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ (–∫—ç—à)
let favoriteVideosCache = [];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ
function getFavoriteVideos() {
  return videoData.filter(video => favoriteVideosCache.includes(video.id));
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –≤–∏–¥–µ–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º
function isVideoFavorite(videoId) {
  return favoriteVideosCache.includes(videoId);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
async function toggleVideoFavorite(videoId) {
  console.log('=== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –ò–ó–ë–†–ê–ù–ù–û–ì–û ===');
  console.log('ID –≤–∏–¥–µ–æ:', videoId);
  console.log('–¢–µ–∫—É—â–µ–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:', favoriteVideosCache);
  
  const isFavorite = isVideoFavorite(videoId);
  console.log('–í–∏–¥–µ–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:', isFavorite);
  
  if (isFavorite) {
    // –£–¥–∞–ª—è–µ–º –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
    favoriteVideosCache = favoriteVideosCache.filter(id => id !== videoId);
    console.log('–£–¥–∞–ª—è–µ–º –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');
  } else {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    favoriteVideosCache.push(videoId);
    console.log('–î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
  }
  
  console.log('–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:', favoriteVideosCache);
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Telegram Cloud Storage
  try {
    await saveFavoritesToCloud();
    console.log('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:', error);
  }
  
  const newStatus = !isFavorite;
  console.log('–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:', newStatus);
  console.log('=== –ö–û–ù–ï–¶ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–Ø –ò–ó–ë–†–ê–ù–ù–û–ì–û ===');
  
  return newStatus; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –≤ Cloud Storage
async function saveFavoritesToCloud() {
  return new Promise((resolve, reject) => {
    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.CloudStorage) {
      const favoritesData = JSON.stringify(favoriteVideosCache);
      window.Telegram.WebApp.CloudStorage.setItem('favorites', favoritesData, (error) => {
        if (error) {
          console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –≤ Cloud Storage:', error);
          reject(error);
        } else {
          resolve();
        }
      });
    } else {
      // Fallback –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
      localStorage.setItem('favorites', JSON.stringify(favoriteVideosCache));
      resolve();
    }
  });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–∑ Cloud Storage
async function loadFavoritesFromCloud() {
  return new Promise((resolve) => {
    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.CloudStorage) {
      window.Telegram.WebApp.CloudStorage.getItem('favorites', (error, data) => {
        if (error) {
          console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–∑ Cloud Storage:', error);
          favoriteVideosCache = [];
        } else {
          try {
            favoriteVideosCache = data ? JSON.parse(data) : [];
          } catch (e) {
            console.error('–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:', e);
            favoriteVideosCache = [];
          }
        }
        resolve();
      });
    } else {
      // Fallback –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
      try {
        const data = localStorage.getItem('favorites');
        favoriteVideosCache = data ? JSON.parse(data) : [];
      } catch (e) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∏–∑ localStorage:', e);
        favoriteVideosCache = [];
      }
      resolve();
    }
  });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', async () => {
  await loadFavoritesFromCloud();
  loadUserLikes(); // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
});

// === –°–ò–°–¢–ï–ú–ê –õ–ê–ô–ö–û–í ===

// –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–∞–π–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–∞–∫–∏–µ –≤–∏–¥–µ–æ –æ–Ω –ª–∞–π–∫–Ω—É–ª)
let userLikedVideos = [];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –ª–∞–π–∫–Ω—É–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–æ
function isVideoLiked(videoId) {
  return userLikedVideos.includes(videoId);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ª–∞–π–∫–æ–≤ –≤–∏–¥–µ–æ
function getVideoLikes(videoId) {
  const video = videoData.find(v => v.id === videoId);
  return video ? video.likes : 0;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–∞–π–∫–∞ –≤–∏–¥–µ–æ
async function toggleVideoLike(videoId) {
  const isLiked = isVideoLiked(videoId);
  const video = videoData.find(v => v.id === videoId);
  
  if (!video) {
    console.error('–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ:', videoId);
    return false;
  }
  
  if (isLiked) {
    // –£–±–∏—Ä–∞–µ–º –ª–∞–π–∫
    userLikedVideos = userLikedVideos.filter(id => id !== videoId);
    video.likes -= 1;
  } else {
    // –î–æ–±–∞–≤–ª—è–µ–º –ª–∞–π–∫
    userLikedVideos.push(videoId);
    video.likes += 1;
  }
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
  saveUserLikes();
  
  // –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  // await sendLikeToServer(videoId, !isLiked);
  
  return !isLiked; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∞–π–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–∫–∞ –∏–∑ localStorage)
function loadUserLikes() {
  try {
    const data = localStorage.getItem('userLikes');
    userLikedVideos = data ? JSON.parse(data) : [];
  } catch (e) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–∞–π–∫–æ–≤:', e);
    userLikedVideos = [];
  }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–∞–π–∫–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–∫–∞ –≤ localStorage)
function saveUserLikes() {
  try {
    localStorage.setItem('userLikes', JSON.stringify(userLikedVideos));
  } catch (e) {
    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–∞–π–∫–æ–≤:', e);
  }
}

// –í—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
console.log("–î–∞–Ω–Ω—ã–µ –æ –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:", videoData);

// === –§–£–ù–ö–¶–ò–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø ===
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
function testAllFunctions() {
    console.log("=== –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –§–£–ù–ö–¶–ò–ô ===");
    
    // –¢–µ—Å—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
    console.log("1. –¢–µ—Å—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ:");
    console.log("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –¥–æ:", favoriteVideosCache);
    
    // –î–æ–±–∞–≤–ª—è–µ–º video1 –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    toggleVideoFavorite('video1').then(() => {
        console.log("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è video1:", favoriteVideosCache);
        console.log("video1 –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º?", isVideoFavorite('video1'));
        
        // –£–±–∏—Ä–∞–µ–º video1 –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        toggleVideoFavorite('video1').then(() => {
            console.log("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è video1:", favoriteVideosCache);
            console.log("video1 –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º?", isVideoFavorite('video1'));
        });
    });
    
    // –¢–µ—Å—Ç –ª–∞–π–∫–æ–≤
    console.log("2. –¢–µ—Å—Ç –ª–∞–π–∫–æ–≤:");
    console.log("–õ–∞–π–∫–∏ video1 –¥–æ:", getVideoLikes('video1'));
    console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∞–π–∫–Ω—É–ª video1?", isVideoLiked('video1'));
    
    // –°—Ç–∞–≤–∏–º –ª–∞–π–∫
    toggleVideoLike('video1').then(() => {
        console.log("–õ–∞–π–∫–∏ video1 –ø–æ—Å–ª–µ –ª–∞–π–∫–∞:", getVideoLikes('video1'));
        console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∞–π–∫–Ω—É–ª video1?", isVideoLiked('video1'));
        
        // –£–±–∏—Ä–∞–µ–º –ª–∞–π–∫
        toggleVideoLike('video1').then(() => {
            console.log("–õ–∞–π–∫–∏ video1 –ø–æ—Å–ª–µ —É–±–∏—Ä–∞–Ω–∏—è –ª–∞–π–∫–∞:", getVideoLikes('video1'));
            console.log("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∞–π–∫–Ω—É–ª video1?", isVideoLiked('video1'));
        });
    });
}

// –î–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
window.testAllFunctions = testAllFunctions;

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
window.testFavorites = function() {
    console.log('=== –¢–ï–°–¢ –ò–ó–ë–†–ê–ù–ù–û–ì–û ===');
    console.log('–¢–µ–∫—É—â–µ–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ:', favoriteVideosCache);
    console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:');
    console.log('- isVideoFavorite:', typeof isVideoFavorite);
    console.log('- toggleVideoFavorite:', typeof toggleVideoFavorite);
    console.log('- getFavoriteVideos:', typeof getFavoriteVideos);
    
    // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å video1
    console.log('video1 –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º?', isVideoFavorite('video1'));
    console.log('–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è video1 –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: toggleVideoFavorite("video1")');
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
window.checkSystemStatus = function() {
    console.log('=== –°–û–°–¢–û–Ø–ù–ò–ï –°–ò–°–¢–ï–ú–´ ===');
    console.log('favoriteVideosCache:', favoriteVideosCache);
    console.log('userLikedVideos:', userLikedVideos);
    console.log('videoData –∑–∞–≥—Ä—É–∂–µ–Ω:', typeof videoData !== 'undefined' && Array.isArray(videoData));
    console.log('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ:', videoData ? videoData.length : 0);
};

/*
=== –ü–ê–ú–Ø–¢–ö–ê –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú ===

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:
"new"         - –ù–æ–≤–æ–µ
"short"       - –ö–æ—Ä–æ—Ç–∫–∏–µ
"long"        - –î–ª–∏–Ω–Ω—ã–µ
"solo_female" - –û–¥–Ω–∞ (üë©)
"couple"      - –ú+–ñ (üë´)
"threesome"   - –ú–ñ–ú (üéä)
"oral"        - –ú–∏–Ω–µ—Ç (üé∫)
"fetish"      - –§–µ—Ç–∏—à–∏ (üå∂)

–°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ö–ê–¢–ï–ì–û–†–ò–ò (–ù–ï –î–û–ë–ê–í–õ–Ø–ô–¢–ï –í videos-data.js):
"favorites" - –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π)
"popular"   - –ü–æ–ø—É–ª—è—Ä–Ω–æ–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤ ‚â• 1, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é)
"all"       - –í—Å–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –≤–∏–¥–µ–æ)

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
"categories": ["new"]                        // –¢–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
"categories": ["new", "short"]               // –í –¥–≤—É—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö
"categories": ["new", "short", "solo_female"] // –í —Ç—Ä–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö

–®–∞–±–ª–æ–Ω –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤–∏–¥–µ–æ:
{
  "id": "video_NEW_ID",
  "video_url": "VIDEO_URL",
  "title": "–ù–ê–ó–í–ê–ù–ò–ï",
  "displayName": "–ö–†–ê–°–ò–í–û–ï –ù–ê–ó–í–ê–ù–ò–ï –î–õ–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø", // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram
  "duration": 30, // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (1 —Å–µ–∫—É–Ω–¥–∞ = 50 —Ç–æ–∫–µ–Ω–æ–≤)
  "categories": ["–í–´–ë–ï–†–ò_–ö–ê–¢–ï–ì–û–†–ò–ò"], // –°–∫–æ–ø–∏—Ä—É–π –Ω—É–∂–Ω—ã–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
  "preview_image": "/video/videos/previews/NEW_ID_preview.jpg", // –°—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é
  "likes": 0 // –ù–∞—á–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
}

–í–ê–ñ–ù–û: 
- preview_image - —Å—Ç–∞—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- duration - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ç–æ–∫–µ–Ω—ã (1 —Å–µ–∫ = 50 —Ç–æ–∫–µ–Ω–æ–≤)
- displayName - –∫—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —à–∞–±–ª–æ–Ω–∞
- title - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤–∏–¥–µ–æ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ ‚≠ê
- –î–∞–Ω–Ω—ã–µ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Telegram Cloud Storage
- –õ–∞–π–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –õ–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ localStorage (–≤ –±—É–¥—É—â–µ–º - –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ü–†–ï–í–¨–Æ:
- –°—Ç–∞—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –≤–∏–¥–µ–æ –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ
- Fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–±—Ä–∞–Ω—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–ù–û–í–ê–Ø –°–•–ï–ú–ê –û–¢–ü–†–ê–í–ö–ò –î–ê–ù–ù–´–•:
–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –≤–∏–¥–µ–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
{
  "videoPath": "video_templates/template_1.mp4", // –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
  "displayName": "–ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞"     // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
}
*/ 